{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container draws-container">
    <div class="slot-animation">
        <div class="doors">
            <div class="door">
                <div class="boxes">
                    <!-- Boxes will be dynamically added here -->
                </div>
            </div>
            
            <div class="door">
                <div class="boxes">
                    <!-- Boxes will be dynamically added here -->
                </div>
            </div>
            
            <div class="door">
                <div class="boxes">
                    <!-- Boxes will be dynamically added here -->
                </div>
            </div>
            
            <div class="door">
                <div class="boxes">
                    <!-- Boxes will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="draw-header">
        <h5>Todays Draws</h5>
        <a href="{% url 'draws_list' %}" class="btn btn-secondary btn-sm">View All Draws</a>
    </div>
    {% for draw in active_draws %}
    <div class="draw-card">
        <h5>Draw <b>{{ draw.pk }}</b></h5>
        <small>Draw ID: {{ draw.draw_uuid }}</small><br>
        <small>Date: <b>{{ draw.draw_date|date:"d-M-Y" }}</b></small><br>
        <small>Time: <b>{{ draw.draw_time|time:"h A" }}</b></small><br>
        {% if draw.result_generated %}
            <p>Result Number: <b>{{ draw.result_number }}</b></p>
        {% else %}
            <p class="result-not-released">Result Not Released</p>
            <a href={% url 'create_order' draw.pk %} class="btn btn-primary">Book Tickets</a>
        {% endif %}
    </div>
    {% endfor %}
</div>

<style>
    .slot-animation {
        margin: 20px 0;
    }

    .doors {
        display: flex;
    }
    
    .door {
        background: linear-gradient(to bottom right, #f8f9fa, #e2e6ea);
        box-shadow: 0 0 3px 2px rgba(0, 0, 0, 0.1);
        width: 100px;
        height: 150px;
        overflow: hidden;
        border-radius: 1ex;
        margin: 1ch;
    }
    
    .boxes {
        transition: transform 1s ease-in-out;
    }
    
    .box {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 3rem;
    }

    #spinner {
        margin-top: 10px;
    }

    .draw-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .draw-card {
        background-color: #fff;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    .result-not-released {
        color: red;
        margin-top: 10px;
    }
</style>
{% endblock %}
